<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>相关资料 | 朝雨箜尘</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Day Day No Bug">
    
    <link rel="preload" href="/notes/assets/css/0.styles.9812b17c.css" as="style"><link rel="preload" href="/notes/assets/js/app.d8b2377b.js" as="script"><link rel="preload" href="/notes/assets/js/3.5c3071a5.js" as="script"><link rel="preload" href="/notes/assets/js/1.95b68aec.js" as="script"><link rel="preload" href="/notes/assets/js/48.28f23b41.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.f25beb74.js"><link rel="prefetch" href="/notes/assets/js/11.117eed38.js"><link rel="prefetch" href="/notes/assets/js/12.38cc43c7.js"><link rel="prefetch" href="/notes/assets/js/13.12ecb1c4.js"><link rel="prefetch" href="/notes/assets/js/14.3fa3aea2.js"><link rel="prefetch" href="/notes/assets/js/15.cfd0a2a1.js"><link rel="prefetch" href="/notes/assets/js/16.2a22c7f6.js"><link rel="prefetch" href="/notes/assets/js/17.ae4b0318.js"><link rel="prefetch" href="/notes/assets/js/18.9f22b9ad.js"><link rel="prefetch" href="/notes/assets/js/19.20e4094b.js"><link rel="prefetch" href="/notes/assets/js/20.f32be2ce.js"><link rel="prefetch" href="/notes/assets/js/21.9cbe8e41.js"><link rel="prefetch" href="/notes/assets/js/22.4bbf1749.js"><link rel="prefetch" href="/notes/assets/js/23.3b73a2bd.js"><link rel="prefetch" href="/notes/assets/js/24.bea7d984.js"><link rel="prefetch" href="/notes/assets/js/25.1ddc2df6.js"><link rel="prefetch" href="/notes/assets/js/26.a4555e60.js"><link rel="prefetch" href="/notes/assets/js/27.96e73e37.js"><link rel="prefetch" href="/notes/assets/js/28.9d6459ef.js"><link rel="prefetch" href="/notes/assets/js/29.ad6ada1b.js"><link rel="prefetch" href="/notes/assets/js/30.883fe399.js"><link rel="prefetch" href="/notes/assets/js/31.9bc1c5f8.js"><link rel="prefetch" href="/notes/assets/js/32.f7ce5c0d.js"><link rel="prefetch" href="/notes/assets/js/33.7f31fbd7.js"><link rel="prefetch" href="/notes/assets/js/34.140a9ea2.js"><link rel="prefetch" href="/notes/assets/js/35.46155bbf.js"><link rel="prefetch" href="/notes/assets/js/36.5736e8b9.js"><link rel="prefetch" href="/notes/assets/js/37.5591c940.js"><link rel="prefetch" href="/notes/assets/js/38.3c3d3083.js"><link rel="prefetch" href="/notes/assets/js/39.3eeb6a73.js"><link rel="prefetch" href="/notes/assets/js/4.46a677e1.js"><link rel="prefetch" href="/notes/assets/js/40.36c8dc86.js"><link rel="prefetch" href="/notes/assets/js/41.d50db519.js"><link rel="prefetch" href="/notes/assets/js/42.71e6c1a3.js"><link rel="prefetch" href="/notes/assets/js/43.e4358995.js"><link rel="prefetch" href="/notes/assets/js/44.05f0f2b2.js"><link rel="prefetch" href="/notes/assets/js/45.4e00b28a.js"><link rel="prefetch" href="/notes/assets/js/46.612ab157.js"><link rel="prefetch" href="/notes/assets/js/47.f57d66fe.js"><link rel="prefetch" href="/notes/assets/js/49.284088bc.js"><link rel="prefetch" href="/notes/assets/js/5.c7a67aae.js"><link rel="prefetch" href="/notes/assets/js/50.d42fba4a.js"><link rel="prefetch" href="/notes/assets/js/51.cfaafe57.js"><link rel="prefetch" href="/notes/assets/js/52.41338ae0.js"><link rel="prefetch" href="/notes/assets/js/53.54598cd1.js"><link rel="prefetch" href="/notes/assets/js/54.320be6e2.js"><link rel="prefetch" href="/notes/assets/js/55.22d971f1.js"><link rel="prefetch" href="/notes/assets/js/56.c04aaf47.js"><link rel="prefetch" href="/notes/assets/js/57.ae376922.js"><link rel="prefetch" href="/notes/assets/js/58.2c2bd3d7.js"><link rel="prefetch" href="/notes/assets/js/59.be3e4272.js"><link rel="prefetch" href="/notes/assets/js/6.fd518e13.js"><link rel="prefetch" href="/notes/assets/js/60.7d759f36.js"><link rel="prefetch" href="/notes/assets/js/61.6e814f2f.js"><link rel="prefetch" href="/notes/assets/js/62.f258c74a.js"><link rel="prefetch" href="/notes/assets/js/63.07e98c36.js"><link rel="prefetch" href="/notes/assets/js/64.777a2893.js"><link rel="prefetch" href="/notes/assets/js/65.8bd2b3b6.js"><link rel="prefetch" href="/notes/assets/js/66.6fe5ab32.js"><link rel="prefetch" href="/notes/assets/js/67.36b13278.js"><link rel="prefetch" href="/notes/assets/js/68.aaa58943.js"><link rel="prefetch" href="/notes/assets/js/69.a79671ba.js"><link rel="prefetch" href="/notes/assets/js/7.e9ded8b7.js"><link rel="prefetch" href="/notes/assets/js/70.996df1f1.js"><link rel="prefetch" href="/notes/assets/js/71.52d77833.js"><link rel="prefetch" href="/notes/assets/js/72.2fdc8e7f.js"><link rel="prefetch" href="/notes/assets/js/8.66675f19.js"><link rel="prefetch" href="/notes/assets/js/9.9e37e369.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.9812b17c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>朝雨箜尘</h3> <p class="description" data-v-59e6cb88>Day Day No Bug</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><img src="/notes/yinu.jpg" alt="朝雨箜尘" class="logo"> <span class="site-name">朝雨箜尘</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/categories/CSS/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/HTTP/" class="nav-link"><i class="undefined"></i>
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Interview/" class="nav-link"><i class="undefined"></i>
  Interview
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Nodejs/" class="nav-link"><i class="undefined"></i>
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/TypeScript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Tools/" class="nav-link"><i class="undefined"></i>
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/notes/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/notes/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1451824821580487" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yinuuu/notes" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dashboard" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://leetcode.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  力扣
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bilibili.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  bilibili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/notes/yinu.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <!----> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>58</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>25</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link"><i class="iconfont reco-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/categories/CSS/" class="nav-link"><i class="undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/HTTP/" class="nav-link"><i class="undefined"></i>
  HTTP
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Interview/" class="nav-link"><i class="undefined"></i>
  Interview
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/JavaScript/" class="nav-link"><i class="undefined"></i>
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Nodejs/" class="nav-link"><i class="undefined"></i>
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/TypeScript/" class="nav-link"><i class="undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/Tools/" class="nav-link"><i class="undefined"></i>
  Tools
</a></li><li class="dropdown-item"><!----> <a href="/notes/categories/前端/" class="nav-link"><i class="undefined"></i>
  前端
</a></li></ul></div></div><div class="nav-item"><a href="/notes/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/notes/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-other"></i>
      其他
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/1451824821580487" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-juejin"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/yinuuu/notes" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://gitee.com/dashboard" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-mayun"></i>
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://leetcode.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-coding"></i>
  力扣
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.bilibili.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bilibili"></i>
  bilibili
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88></h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page" style="padding-right:0;"><section style="display:;"><div class="page-title"><h1 class="title">相关资料</h1> <div data-v-8a445198><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="相关资料"><a href="#相关资料" class="header-anchor">#</a> 相关资料</h1> <p>kubeadm ：https://www.jianshu.com/p/1e65610dd223</p> <p>docker hub:  https://hub.docker.com/</p> <p>k8s的一些版本依赖:</p> <p>https://kubernetes.io/zh/docs/setup/release/version-skew-policy/</p> <p>​</p> <h1 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h1> <h2 id="系统"><a href="#系统" class="header-anchor">#</a> 系统</h2> <p>​	centos 7.6</p> <p>​	https://www.jianshu.com/p/1e65610dd223</p> <h2 id="docker安装"><a href="#docker安装" class="header-anchor">#</a> docker安装</h2> <h3 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h3> <p>https://docs.docker.com/engine/install/centos/</p> <p>https://blog.51cto.com/3241766/2405624</p> <h3 id="安装依赖包"><a href="#安装依赖包" class="header-anchor">#</a> 安装依赖包</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils   device-mapper-persistent-data   lvm2
</code></pre></div><blockquote><p>yum-utils 提供了 yum-config-manager ，并且 device mapper 存储驱动程序需要 device-mapper-persistent-data 和 lvm2。</p> <p>device mapper
Device Mapper 是 Linux2.6 内核中支持逻辑卷管理的通用设备映射机制，它为实现用于存储资源管理的块设备驱动提供了一个高度模块化的内核架构。</p> <p>LVM
LVM（Logical Volume Manager）逻辑卷管理。</p> <p>它是对磁盘分区进行管理的一种机制，建立在硬盘和分区之上的一个逻辑层，用来提高磁盘管理的灵活性。通过LVM可将若干个磁盘分区连接为一个整块的卷组(Volume Group)，形成一个存储池。可以在卷组上随意创建逻辑卷(Logical Volumes)，并进一步在逻辑卷上创建文件系统，与直接使用物理存储在管理上相比，提供了更好灵活性。</p> <p>device-mapper-persistent-data 和 lvm2
两者都是Device Mapper所需要的。</p></blockquote> <h3 id="设置docker源"><a href="#设置docker源" class="header-anchor">#</a> 设置Docker源</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>yum-config-manager     --add-repo     https://download.docker.com/linux/centos/docker-ce.repo
</code></pre></div><h3 id="docker安装版本查看"><a href="#docker安装版本查看" class="header-anchor">#</a> docker安装版本查看</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>yum list docker-ce <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span>
</code></pre></div><h3 id="安装docker"><a href="#安装docker" class="header-anchor">#</a> 安装docker</h3> <p>指定版本</p> <div class="language-bash extra-class"><pre class="language-bash"><code> yum <span class="token function">install</span> docker-ce-18.09.6 docker-ce-cli-18.09.6 containerd.io
</code></pre></div><p>安装最新版本</p> <div class="language- extra-class"><pre class="language-text"><code>yum install docker-ce
</code></pre></div><h3 id="启动docker"><a href="#启动docker" class="header-anchor">#</a> 启动docker</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>systemctl start <span class="token function">docker</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre></div><h3 id="修改docker镜像仓库"><a href="#修改docker镜像仓库" class="header-anchor">#</a> 修改docker镜像仓库</h3> <p>查看：docker info|grep Registry</p> <p>https://www.runoob.com/docker/docker-mirror-acceleration.html</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker
<span class="token comment">#修改cgroup驱动为systemd[k8s官方推荐]、限制容器日志量、修改存储类型，最后的docker家目录可修改</span>
<span class="token function">cat</span> <span class="token operator">&gt;</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;</span><span class="token string">EOF
{
  &quot;exec-opts&quot;: [&quot;native.cgroupdriver=systemd&quot;],
  &quot;log-driver&quot;: &quot;json-file&quot;,
  &quot;log-opts&quot;: {
    &quot;max-size&quot;: &quot;100m&quot;
  },
  &quot;storage-driver&quot;: &quot;overlay2&quot;,
  &quot;storage-opts&quot;: [
    &quot;overlay2.override_kernel_check=true&quot;
  ],
  &quot;registry-mirrors&quot;: [&quot;https://7uuu3esz.mirror.aliyuncs.com&quot;],
  &quot;data-root&quot;: &quot;/data/docker&quot;
}
EOF</span>
<span class="token comment">#添加开机自启，立即启动</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> <span class="token function">docker</span>
systemctl daemon-reload
systemctl restart <span class="token function">docker</span>
</code></pre></div><h2 id="k8s单机安装"><a href="#k8s单机安装" class="header-anchor">#</a> k8s单机安装</h2> <p>https://www.jianshu.com/p/0ef60c7172b5</p> <h3 id="添加kubernetes源"><a href="#添加kubernetes源" class="header-anchor">#</a> 添加kubernetes源</h3> <div class="language-ruby extra-class"><pre class="language-ruby"><code>cat <span class="token operator">&gt;</span> <span class="token operator">/</span>etc<span class="token operator">/</span>yum<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>d<span class="token operator">/</span>kubernetes<span class="token punctuation">.</span>repo <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;</span><span class="token symbol">EOF</span></span><span class="token string">
[kubernetes]
name=Kubernetes
baseurl=http://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/
enabled=1
gpgcheck=1
repo_gpgcheck=1
gpgkey=http://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg http://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg
</span><span class="token delimiter"><span class="token symbol">EOF</span></span></span>
<span class="token comment">#重建yum缓存，输入y添加证书认证</span>
yum makecache fast
</code></pre></div><h3 id="查看安装版本"><a href="#查看安装版本" class="header-anchor">#</a> 查看安装版本</h3> <div class="language-cpp extra-class"><pre class="language-cpp"><code>yum list <span class="token operator">|</span>grep kubelet
yum list <span class="token operator">|</span>grep kubeadm
yum list <span class="token operator">|</span>grep kubectl
yum list kubelet <span class="token operator">*</span><span class="token operator">--</span>showduplicates <span class="token operator">|</span> sort <span class="token operator">-</span>r<span class="token operator">*</span> 
</code></pre></div><p>卸载</p> <p>yum remove kubelet</p> <p>yum remove kubeadm</p> <p>yum remove kubectl</p> <h3 id="安装kubeadm、kubelet、kubectl"><a href="#安装kubeadm、kubelet、kubectl" class="header-anchor">#</a> 安装kubeadm、kubelet、kubectl</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> kubelet-1.19.0-0 <span class="token parameter variable">--disableexcludes</span><span class="token operator">=</span>kubernetes
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> kubeadm-1.19.0-0 <span class="token parameter variable">--disableexcludes</span><span class="token operator">=</span>kubernetes
yum <span class="token function">install</span> <span class="token parameter variable">-y</span> kubectl-1.19.0-0 <span class="token parameter variable">--disableexcludes</span><span class="token operator">=</span>kubernetes
systemctl <span class="token builtin class-name">enable</span> <span class="token parameter variable">--now</span> kubelet
</code></pre></div><h3 id="配置自动补全命令"><a href="#配置自动补全命令" class="header-anchor">#</a> 配置自动补全命令</h3> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token comment">#安装bash自动补全插件</span>
yum install bash<span class="token operator">-</span>completion <span class="token operator">-</span>y
<span class="token comment">#设置kubectl与kubeadm命令补全，下次login生效</span>
kubectl completion bash <span class="token operator">&gt;</span> <span class="token operator">/</span>etc<span class="token operator">/</span>bash_completion<span class="token punctuation">.</span>d<span class="token operator">/</span>kubectl
kubeadm completion bash <span class="token operator">&gt;</span> <span class="token operator">/</span>etc<span class="token operator">/</span>bash_completion<span class="token punctuation">.</span>d<span class="token operator">/</span>kubeadm
</code></pre></div><h3 id="查看kubernetes镜像依赖"><a href="#查看kubernetes镜像依赖" class="header-anchor">#</a> 查看kubernetes镜像依赖</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>kubeadm config images list --kubernetes-version v1.19.0
</code></pre></div><h3 id="新建-get-k8s-images-sh"><a href="#新建-get-k8s-images-sh" class="header-anchor">#</a> 新建 get-k8s-images.sh</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>
<span class="token comment"># Script For Quick Pull K8S Docker Images</span>
<span class="token comment"># by qiraosky &lt;qiraosky@qq.com&gt;</span>

<span class="token comment">#没有1.20.4得镜像，所以装1.19.0</span>
<span class="token assign-left variable">KUBE_VERSION</span><span class="token operator">=</span>v1.19.0
<span class="token assign-left variable">PAUSE_VERSION</span><span class="token operator">=</span><span class="token number">3.2</span>
<span class="token assign-left variable">CORE_DNS_VERSION</span><span class="token operator">=</span><span class="token number">1.7</span>.0
<span class="token assign-left variable">ETCD_VERSION</span><span class="token operator">=</span><span class="token number">3.4</span>.9-1

<span class="token comment"># pull kubernetes images from hub.docker.com</span>
<span class="token function">docker</span> pull kubesphere/kube-proxy-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> pull kubesphere/kube-controller-manager-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> pull kubesphere/kube-apiserver-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> pull kubesphere/kube-scheduler-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token comment"># pull aliyuncs mirror docker images</span>
<span class="token function">docker</span> pull registry.cn-hangzhou.aliyuncs.com/google_containers/pause:<span class="token variable">$PAUSE_VERSION</span>
<span class="token function">docker</span> pull registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:<span class="token variable">$CORE_DNS_VERSION</span>
<span class="token function">docker</span> pull registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:<span class="token variable">$ETCD_VERSION</span>
<span class="token function">docker</span> pull quay.io/coreos/flannel:v0.12.0-arm64
<span class="token function">docker</span> pull quay.io/coreos/flannel:v0.12.0-amd64

<span class="token comment"># retag to k8s.gcr.io prefix</span>
<span class="token function">docker</span> tag kubesphere/kube-proxy-amd64:<span class="token variable">$KUBE_VERSION</span>  k8s.gcr.io/kube-proxy:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> tag kubesphere/kube-controller-manager-amd64:<span class="token variable">$KUBE_VERSION</span> k8s.gcr.io/kube-controller-manager:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> tag kubesphere/kube-apiserver-amd64:<span class="token variable">$KUBE_VERSION</span> k8s.gcr.io/kube-apiserver:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> tag kubesphere/kube-scheduler-amd64:<span class="token variable">$KUBE_VERSION</span> k8s.gcr.io/kube-scheduler:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:<span class="token variable">$PAUSE_VERSION</span> k8s.gcr.io/pause:<span class="token variable">$PAUSE_VERSION</span>
<span class="token function">docker</span> tag registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:<span class="token variable">$CORE_DNS_VERSION</span> k8s.gcr.io/coredns:<span class="token variable">$CORE_DNS_VERSION</span>
<span class="token function">docker</span> tag registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:<span class="token variable">$ETCD_VERSION</span> k8s.gcr.io/etcd:<span class="token variable">$ETCD_VERSION</span>

<span class="token comment"># untag origin tag, the images won't be delete.</span>
<span class="token function">docker</span> rmi kubesphere/kube-proxy-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> rmi kubesphere/kube-controller-manager-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> rmi kubesphere/kube-apiserver-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> rmi kubesphere/kube-scheduler-amd64:<span class="token variable">$KUBE_VERSION</span>
<span class="token function">docker</span> rmi registry.cn-hangzhou.aliyuncs.com/google_containers/pause:<span class="token variable">$PAUSE_VERSION</span>
<span class="token function">docker</span> rmi registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:<span class="token variable">$CORE_DNS_VERSION</span>
<span class="token function">docker</span> rmi registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:<span class="token variable">$ETCD_VERSION</span>
</code></pre></div><h3 id="初始化kube-master"><a href="#初始化kube-master" class="header-anchor">#</a> 初始化kube-master</h3> <p>修改kubelet配置默认cgroup driver</p> <div class="language-ruby extra-class"><pre class="language-ruby"><code>mkdir <span class="token operator">-</span>p <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token regex-literal"><span class="token regex">/kubelet/</span></span>
cat <span class="token operator">&gt;</span> <span class="token operator">/</span>var<span class="token operator">/</span>lib<span class="token operator">/</span>kubelet<span class="token operator">/</span>config<span class="token punctuation">.</span>yaml <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;</span><span class="token symbol">EOF</span></span><span class="token string">
apiVersion: kubelet.config.k8s.io/v1beta1
kind: KubeletConfiguration
cgroupDriver: systemd
</span><span class="token delimiter"><span class="token symbol">EOF</span></span></span>
systemctl restart kubelet
</code></pre></div><h3 id="测试环境是否正常"><a href="#测试环境是否正常" class="header-anchor">#</a> 测试环境是否正常</h3> <div class="language-kotlin extra-class"><pre class="language-kotlin"><code>kubeadm <span class="token keyword">init</span> phase preflight
</code></pre></div><p>（WARNING是正常的）</p> <p>其实也可以手动执行命令，讲依赖的镜像都拉下来先：</p> <p>kubeadm config images pull</p> <p>这里是最麻烦得，可能因为网络原因拉不下来，所以考虑从阿里云拉下来，然后重新打tag</p> <h3 id="初始化k8s-init"><a href="#初始化k8s-init" class="header-anchor">#</a> 初始化k8s init</h3> <p>​	kubeadm init --pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.19.0</p> <div class="language- extra-class"><pre class="language-text"><code>[root@localhost ~]# kubeadm init --pod-network-cidr=10.244.0.0/16 --kubernetes-version=v1.19.0
W0314 10:10:40.638775    5741 configset.go:348] WARNING: kubeadm cannot validate component configs for API groups [kubelet.config.k8s.io kubeproxy.config.k8s.io]
[init] Using Kubernetes version: v1.19.0
[preflight] Running pre-flight checks
        [WARNING IsDockerSystemdCheck]: detected &quot;cgroupfs&quot; as the Docker cgroup driver. The recommended driver is &quot;systemd&quot;. Please follow the guide at https://kubernetes.io/docs/setup/cri/
        [WARNING SystemVerification]: this Docker version is not on the list of validated versions: 20.10.5. Latest validated version: 19.03
[preflight] Pulling images required for setting up a Kubernetes cluster
[preflight] This might take a minute or two, depending on the speed of your internet connection
[preflight] You can also perform this action in beforehand using 'kubeadm config images pull'
[certs] Using certificateDir folder &quot;/etc/kubernetes/pki&quot;
[certs] Generating &quot;ca&quot; certificate and key
[certs] Generating &quot;apiserver&quot; certificate and key
[certs] apiserver serving cert is signed for DNS names [kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local localhost.localdomain] and IPs [10.96.0.1 172.16.11.251]
[certs] Generating &quot;apiserver-kubelet-client&quot; certificate and key
[certs] Generating &quot;front-proxy-ca&quot; certificate and key
[certs] Generating &quot;front-proxy-client&quot; certificate and key
[certs] Generating &quot;etcd/ca&quot; certificate and key
[certs] Generating &quot;etcd/server&quot; certificate and key
[certs] etcd/server serving cert is signed for DNS names [localhost localhost.localdomain] and IPs [172.16.11.251 127.0.0.1 ::1]
[certs] Generating &quot;etcd/peer&quot; certificate and key
[certs] etcd/peer serving cert is signed for DNS names [localhost localhost.localdomain] and IPs [172.16.11.251 127.0.0.1 ::1]
[certs] Generating &quot;etcd/healthcheck-client&quot; certificate and key
[certs] Generating &quot;apiserver-etcd-client&quot; certificate and key
[certs] Generating &quot;sa&quot; key and public key
[kubeconfig] Using kubeconfig folder &quot;/etc/kubernetes&quot;
[kubeconfig] Writing &quot;admin.conf&quot; kubeconfig file
[kubeconfig] Writing &quot;kubelet.conf&quot; kubeconfig file
[kubeconfig] Writing &quot;controller-manager.conf&quot; kubeconfig file
[kubeconfig] Writing &quot;scheduler.conf&quot; kubeconfig file
[kubelet-start] Writing kubelet environment file with flags to file &quot;/var/lib/kubelet/kubeadm-flags.env&quot;
[kubelet-start] Writing kubelet configuration to file &quot;/var/lib/kubelet/config.yaml&quot;
[kubelet-start] Starting the kubelet
[control-plane] Using manifest folder &quot;/etc/kubernetes/manifests&quot;
[control-plane] Creating static Pod manifest for &quot;kube-apiserver&quot;
[control-plane] Creating static Pod manifest for &quot;kube-controller-manager&quot;
[control-plane] Creating static Pod manifest for &quot;kube-scheduler&quot;
[etcd] Creating static Pod manifest for local etcd in &quot;/etc/kubernetes/manifests&quot;
[wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &quot;/etc/kubernetes/manifests&quot;. This can take up to 4m0s
[apiclient] All control plane components are healthy after 14.502735 seconds
[upload-config] Storing the configuration used in ConfigMap &quot;kubeadm-config&quot; in the &quot;kube-system&quot; Namespace
[kubelet] Creating a ConfigMap &quot;kubelet-config-1.19&quot; in namespace kube-system with the configuration for the kubelets in the cluster
[upload-certs] Skipping phase. Please see --upload-certs
[mark-control-plane] Marking the node localhost.localdomain as control-plane by adding the label &quot;node-role.kubernetes.io/master=''&quot;
[mark-control-plane] Marking the node localhost.localdomain as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule]
[bootstrap-token] Using token: mobxtr.i1vybgejaili60t7
[bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to get nodes
[bootstrap-token] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials
[bootstrap-token] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token
[bootstrap-token] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster
[bootstrap-token] Creating the &quot;cluster-info&quot; ConfigMap in the &quot;kube-public&quot; namespace
[kubelet-finalize] Updating &quot;/etc/kubernetes/kubelet.conf&quot; to point to a rotatable kubelet client certificate and key
[addons] Applied essential addon: CoreDNS
[addons] Applied essential addon: kube-proxy

Your Kubernetes control-plane has initialized successfully!

To start using your cluster, you need to run the following as a regular user:

  mkdir -p $HOME/.kube
  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
  sudo chown $(id -u):$(id -g) $HOME/.kube/config

You should now deploy a pod network to the cluster.
Run &quot;kubectl apply -f [podnetwork].yaml&quot; with one of the options listed at:
  https://kubernetes.io/docs/concepts/cluster-administration/addons/

Then you can join any number of worker nodes by running the following on each as root:

kubeadm join 172.16.11.251:6443 --token mobxtr.i1vybgejaili60t7 \
    --discovery-token-ca-cert-hash sha256:38543ff152bae1e5fe09da1fe51988e93c8221e43784194dfe052c3b9092850d 
[root@localhost ~]# 
</code></pre></div><p>可以看待kube 启动了部分进程</p> <div class="language- extra-class"><pre class="language-text"><code>[root@localhost ~]# ps -ef|grep kube
root      7304  7189  5 10:10 ?        00:00:04 etcd --advertise-client-urls=https://172.16.11.251:2379 --cert-file=/etc/kubernetes/pki/etcd/server.crt --client-cert-auth=true --data-dir=/var/lib/etcd --initial-advertise-peer-urls=https://172.16.11.251:2380 --initial-cluster=localhost.localdomain=https://172.16.11.251:2380 --key-file=/etc/kubernetes/pki/etcd/server.key --listen-client-urls=https://127.0.0.1:2379,https://172.16.11.251:2379 --listen-metrics-urls=http://127.0.0.1:2381 --listen-peer-urls=https://172.16.11.251:2380 --name=localhost.localdomain --peer-cert-file=/etc/kubernetes/pki/etcd/peer.crt --peer-client-cert-auth=true --peer-key-file=/etc/kubernetes/pki/etcd/peer.key --peer-trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt --snapshot-count=10000 --trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt
root      7305  7196  2 10:10 ?        00:00:02 kube-scheduler --authentication-kubeconfig=/etc/kubernetes/scheduler.conf --authorization-kubeconfig=/etc/kubernetes/scheduler.conf --bind-address=127.0.0.1 -kubeconfig=/etc/kubernetes/scheduler.conf --leader-elect=true --port=0
root      7312  7194 18 10:10 ?        00:00:14 kube-apiserver --advertise-address=172.16.11.251 --allow-privileged=true --authorization-mode=Node,RBAC --client-ca-file=/etc/kubernetes/pki/ca.crt --enable-admission-plugins=NodeRestriction --enable-bootstrap-token-auth=true --etcd-cafile=/etc/kubernetes/pki/etcd/ca.crt --etcd-certfile=/etc/kubernetes/pki/apiserver-etcd-client.crt --etcd-keyfile=/etc/kubernetes/pki/apiserver-etcd-client.key --etcd-servers=https://127.0.0.1:2379 --insecure-port=0 --kubelet-client-certificate=/etc/kubernetes/pki/apiserver-kubelet-client.crt --kubelet-client-key=/etc/kubernetes/pki/apiserver-kubelet-client.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --proxy-client-cert-file=/etc/kubernetes/pki/front-proxy-client.crt --proxy-client-key-file=/etc/kubernetes/pki/front-proxy-client.key --requestheader-allowed-names=front-proxy-client --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=6443 --service-account-key-file=/etc/kubernetes/pki/sa.pub --service-cluster-ip-range=10.96.0.0/12 --tls-cert-file=/etc/kubernetes/pki/apiserver.crt --tls-private-key-file=/etc/kubernetes/pki/apiserver.key
root      7316  7190  5 10:10 ?        00:00:04 kube-controller-manager --allocate-node-cidrs=true --authentication-kubeconfig=/etc/kubernetes/controller-manager.conf --authorization-kubeconfig=/etc/kubernetes/controller-manager.conf --bind-address=127.0.0.1 --client-ca-file=/etc/kubernetes/pki/ca.crt --cluster-cidr=10.244.0.0/16 --cluster-name=kubernetes --cluster-signing-cert-file=/etc/kubernetes/pki/ca.crt --cluster-signing-key-file=/etc/kubernetes/pki/ca.key --controllers=*,bootstrapsigner,tokencleaner --kubeconfig=/etc/kubernetes/controller-manager.conf --leader-elect=true --node-cidr-mask-size=24 --port=0 --requestheader-client-ca-file=/etc/kubernetes/pki/front-proxy-ca.crt --root-ca-file=/etc/kubernetes/pki/ca.crt --service-account-private-key-file=/etc/kubernetes/pki/sa.key --service-cluster-ip-range=10.96.0.0/12 --use-service-account-credentials=true
root      8102     1  4 10:11 ?        00:00:03 /usr/bin/kubelet --bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --kubeconfig=/etc/kubernetes/kubelet.conf --config=/var/lib/kubelet/config.yaml --network-plugin=cni --pod-infra-container-image=k8s.gcr.io/pause:3.2
root      8575  8540  0 10:11 ?        00:00:00 /usr/local/bin/kube-proxy --config=/var/lib/kube-proxy/config.conf --hostname-override=localhost.localdomain


</code></pre></div><h3 id="配置master认证"><a href="#配置master认证" class="header-anchor">#</a> 配置master认证</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'export KUBECONFIG=/etc/kubernetes/admin.conf'</span> <span class="token operator">&gt;&gt;</span> /etc/profile
<span class="token builtin class-name">source</span> /etc/profile
</code></pre></div><h3 id="安装网络组件flannel"><a href="#安装网络组件flannel" class="header-anchor">#</a> 安装网络组件flannel</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 注意这里下载kubectl apply -f kube-flannel.yaml需要科学上网</span>
<span class="token function">wget</span> https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml 
kubectl apply <span class="token parameter variable">-f</span> kube-flannel.yaml

<span class="token punctuation">[</span>root@localhost k8s<span class="token punctuation">]</span><span class="token comment"># kubectl apply -f kube-flannel.yml </span>
podsecuritypolicy.policy/psp.flannel.unprivileged created
clusterrole.rbac.authorization.k8s.io/flannel created
clusterrolebinding.rbac.authorization.k8s.io/flannel created
serviceaccount/flannel created
configmap/kube-flannel-cfg created
daemonset.apps/kube-flannel-ds created
</code></pre></div><h3 id="查看kube-master节点状态"><a href="#查看kube-master节点状态" class="header-anchor">#</a> 查看kube-master节点状态</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code>kubectl <span class="token keyword">get</span> nodes

<span class="token punctuation">[</span>root<span class="token class-name">@localhost</span> k8s<span class="token punctuation">]</span># kubectl <span class="token keyword">get</span> nodes
NAME                    STATUS     ROLES    AGE   VERSION
localhost<span class="token punctuation">.</span>localdomain   NotReady   master   <span class="token number">17m</span>   v1<span class="token punctuation">.</span><span class="token number">19.0</span>
</code></pre></div><h3 id="查看所有pod-状态"><a href="#查看所有pod-状态" class="header-anchor">#</a> 查看所有pod 状态</h3> <p>如果长时间达不到 ready 可以</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>kubectl <span class="token keyword">get</span> pods <span class="token operator">--</span>all<span class="token operator">-</span>namespaces

<span class="token punctuation">[</span>root<span class="token class-name">@localhost</span> k8s<span class="token punctuation">]</span># kubectl <span class="token keyword">get</span> pods <span class="token operator">--</span>all<span class="token operator">-</span>namespaces
NAMESPACE     NAME                                            READY   STATUS    RESTARTS   AGE
kube<span class="token operator">-</span>system   coredns<span class="token operator">-</span>f9fd979d6<span class="token operator">-</span>4v47g                         <span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
kube<span class="token operator">-</span>system   coredns<span class="token operator">-</span>f9fd979d6<span class="token operator">-</span>w6js5                         <span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
kube<span class="token operator">-</span>system   etcd<span class="token operator">-</span>localhost<span class="token punctuation">.</span>localdomain                      <span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
kube<span class="token operator">-</span>system   kube<span class="token operator">-</span>apiserver<span class="token operator">-</span>localhost<span class="token punctuation">.</span>localdomain            <span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
kube<span class="token operator">-</span>system   kube<span class="token operator">-</span>controller<span class="token operator">-</span>manager<span class="token operator">-</span>localhost<span class="token punctuation">.</span>localdomain   <span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
kube<span class="token operator">-</span>system   kube<span class="token operator">-</span>flannel<span class="token operator">-</span>ds<span class="token operator">-</span>jz75j                           <span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          42s
kube<span class="token operator">-</span>system   kube<span class="token operator">-</span>proxy<span class="token operator">-</span>l5h2r                                <span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
kube<span class="token operator">-</span>system   kube<span class="token operator">-</span>scheduler<span class="token operator">-</span>localhost<span class="token punctuation">.</span>localdomain            <span class="token number">1</span><span class="token operator">/</span><span class="token number">1</span>     Running   <span class="token number">0</span>          <span class="token number">17m</span>
</code></pre></div><p>如果有pod有异常，可以查看描述以解决异常</p> <div class="language-objectivec extra-class"><pre class="language-objectivec"><code>kubectl <span class="token operator">-</span>n kube<span class="token operator">-</span>system describe  pod<span class="token operator">-</span>id
</code></pre></div><h3 id="将pod调度到master节点-单机运行k8s"><a href="#将pod调度到master节点-单机运行k8s" class="header-anchor">#</a> 将Pod调度到Master节点（单机运行K8S）</h3> <p>​	出于安全考虑，默认配置下Kubernetes不会将Pod调度到Master节点。如果希望将k8s-master也当作Node使用，可以执行如下命令：</p> <div class="language-undefined extra-class"><pre class="language-text"><code>kubectl taint node k8s-master node-role.kubernetes.io/master-
</code></pre></div><p>其中k8s-master是主机节点hostname如果要恢复Master Only状态，执行如下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl taint <span class="token function">node</span> k8s-master node-role.kubernetes.io/master<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
</code></pre></div><h2 id="hello-world"><a href="#hello-world" class="header-anchor">#</a> Hello World</h2> <h4 id="运行hello-world"><a href="#运行hello-world" class="header-anchor">#</a> 运行hello world</h4> <div class="language- extra-class"><pre class="language-text"><code>kubectl run hello-world --replicas=5 --labels=&quot;run=load-balancer-example&quot; --image=gcr.io/google-samples/node-hello:1.0  --port=8080

[root@localhost ~]# kubectl run hello-world --replicas=5 --labels=&quot;run=load-balancer-example&quot; --image=gcr.io/google-samples/node-hello:1.0  --port=8080
Flag --replicas has been deprecated, has no effect and will be removed in the future.
pod/hello-world created
</code></pre></div><p><strong>kubectl describe pod</strong></p> <h2 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h2> <h4 id="关闭k8s"><a href="#关闭k8s" class="header-anchor">#</a> 关闭k8s</h4> <p>service kubelet stop</p> <p>彻底关闭用 systemctl disable kubelet</p> <h1 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h1> <h2 id="swap-需要关闭或者k8s忽略swap"><a href="#swap-需要关闭或者k8s忽略swap" class="header-anchor">#</a> swap 需要关闭或者k8s忽略swap</h2> <p>[ERROR Swap]: running with swap on is not supported. Please disable swap</p> <p>系统命令关闭 ：swapoff  -a;  free 查看 ，swap为0</p> <h2 id="k8s-版本的问题"><a href="#k8s-版本的问题" class="header-anchor">#</a> k8s 版本的问题</h2> <p>[root@localhost sysconfig]# kubelet --version
Kubernetes v1.20.4</p> <p>由于默认安装kubelet 命令的时候的时候版本是1.20.4，但是init过程中又拉不到v1.20.4的镜像，需要版本保持一致</p> <h2 id="镜像下载不下来的问题"><a href="#镜像下载不下来的问题" class="header-anchor">#</a> 镜像下载不下来的问题</h2> <div class="language- extra-class"><pre><code>    [ERROR ImagePull]: failed to pull image k8s.gcr.io/kube-apiserver:v1.19.8: output: Error response from daemon: Get https://k8s.gcr.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers)
</code></pre></div><p>由于没有科学上网，所以 k8s.gcr.io 是无法访问的。所以要手动处理：</p> <p>docker search kube-apiserver</p> <p>#换可以拉的源docker hub源，但是dockerhub上镜像可能不够行</p> <p>docker pull mirrorgooglecontainers/kube-apiserver:v1.19.0
docker pull mirrorgooglecontainers/kube-controller-manager:v1.19.0
docker pull mirrorgooglecontainers/kube-scheduler:v1.19.0
docker pull mirrorgooglecontainers/kube-proxy:v1.19.0
docker pull mirrorgooglecontainers/pause:3.2
docker pull mirrorgooglecontainers/etcd:3.4.9-1
docker pull mirrorgooglecontainers/coredns:1.7.0</p> <p>#重命名镜像</p> <p>docker tag mirrorgooglecontainers/kube-apiserver:v1.19.0 k8s.gcr.io/kube-apiserver:v1.19.0<br>
docker tag mirrorgooglecontainers/kube-controller-manager:v1.19.0 k8s.gcr.io/kube-controller-manager:v1.19.0
docker tag mirrorgooglecontainers/kube-scheduler:v1.19.0 k8s.gcr.io/kube-scheduler:v1.19.0<br>
docker tag mirrorgooglecontainers/kube-proxy:v1.19.0 k8s.gcr.io/kube-proxy:v1.19.0<br>
docker tag mirrorgooglecontainers/pause:3.2 k8s.gcr.io/pause:3.2<br>
docker tag mirrorgooglecontainers/etcd:3.4.9-1 k8s.gcr.io/etcd:3.4.9-1<br>
docker tag mirrorgooglecontainers/coredns:1.7.0 k8s.gcr.io/coredns:1.7.0</p> <p>########################################################</p> <p>#从阿里云拉
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.0
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.0
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.0
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.0
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.9-1
docker pull registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0</p> <p>#重命名镜像</p> <p>docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-apiserver:v1.19.0 k8s.gcr.io/kube-apiserver:v1.19.0
docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-controller-manager:v1.19.0 k8s.gcr.io/kube-controller-manager:v1.19.0
docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-scheduler:v1.19.0 k8s.gcr.io/kube-scheduler:v1.19.0
docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/kube-proxy:v1.19.0 k8s.gcr.io/kube-proxy:v1.19.0
docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/pause:3.2 k8s.gcr.io/pause:3.2
docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/etcd:3.4.9-1 k8s.gcr.io/etcd:3.4.9-1
docker tag registry.cn-hangzhou.aliyuncs.com/google_containers/coredns:1.7.0 k8s.gcr.io/coredns:1.7.0</p> <p>Error response from daemon: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit</p> <p>#有可能下载得时候一定要v1.90.8</p> <h2 id="下载频率限制"><a href="#下载频率限制" class="header-anchor">#</a> 下载频率限制</h2> <p>Error response from daemon: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit</p> <p>​</p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:0;" data-v-b57cc07c data-v-7dd95ae2></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/notes/assets/js/app.d8b2377b.js" defer></script><script src="/notes/assets/js/3.5c3071a5.js" defer></script><script src="/notes/assets/js/1.95b68aec.js" defer></script><script src="/notes/assets/js/48.28f23b41.js" defer></script>
  </body>
</html>
